{% extends 'base.html' %}
<!-- THIS IS THE PAGE THAT SHOWS THE FORM -->
{% block title %}
    <title>Recommender System - Results</title>
{% endblock %}

{% block content %}
    <!-- Form responsavel por receber inputs -->
     <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light">
        <h2>Recomendações para o filme {{movie_name}}</h2>
        <br>
        {% if is_error == False %}
        <table class="table table-hover">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Filme</th>
                <th scope="col">Distância do filme pesquisado (cosseno)</th>
                <th scope="col">Página do filme (IMDB)</th>
            </tr>
            {% set contador = namespace(value=1) %}
            
            {% for recommendation in lista_recomendacoes %}
                <tr>
                    <td scope="row">{{contador.value}}</td>
                    
                    <!-- <td>{{recommendation[0]}} (ID: {{recommendation[1]}})</td> -->
                    <td class="hover_img"><a href="{{cover_urls[recommendation]}}" target="_blank" style="text-decoration: none"> {{recommendation[0]}} <span><img id="cover_img" src="{{cover_urls[recommendation]}}" alt="image" height="1vh" width="1vh"></span></a> </td>
                    <td>{{recommendation[2]}}</td>
                    <td><a href={{recommendation[3]}} target="_blank">{{recommendation[3]}}</a></td>

                    {% set contador.value = contador.value + 1 %}
                </tr>
            {% endfor %}
            
        </table>
        {% else %}
            <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light">
                <div class="col-md-5 p-lg-5 mx-auto my-5">
                    <h1 class="display-4 font-weight-normal">ERROR</h1>
                    <p class="lead font-weight-normal">Não foi possível gerar as recomendações, tente novamente mais tarde. Erro: {{error}}</p>
                    
                </div>
            
</div>
        {% endif %}
    </div>


{% endblock %}